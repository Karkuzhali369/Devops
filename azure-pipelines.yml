trigger:
- main   # ðŸ‘ˆ change to your actual branch name if needed (e.g. master)

pool:
  vmImage: 'ubuntu-latest'

steps:
# Step 1 â€“ Checkout your repo
- checkout: self

# Step 2 â€“ Install and use Java 21
- task: JavaToolInstaller@0
  inputs:
    versionSpec: '21'
    jdkArchitecture: 'x64'
    jdkSourceOption: 'PreInstalled'   # use built-in JDK 21 on Microsoft agents

# Step 3 â€“ Build with Maven
- task: Maven@4
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'clean package'
    mavenOptions: '-Xmx3072m'
    javaHomeOption: 'Path'
    jdkVersionOption: '1.21'   # ðŸ‘ˆ match your JDK version
    jdkArchitectureOption: 'x64'
    publishJUnitResults: true
    testResultsFiles: '**/surefire-reports/TEST-*.xml'

# Step 4 â€“ (Optional) Publish artifacts
- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: 'target'
    ArtifactName: 'drop'
    publishLocation: 'Container'
